name: Build and test

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        dotnet-version: [ '7.0.x' ]

    steps:
      #- uses: actions/checkout@v3
      #- name: Setup .NET Core SDK ${{ matrix.dotnet-version }}
      #  uses: actions/setup-dotnet@v3
       # with:
        #  dotnet-version: ${{ matrix.dotnet-version }}
      - name: Setup Java 11
        uses: actions/setup-java@v3
        with:
          distribution: 'adopt'
          java-version: 11
      - name: Navigate to Workspace
        run: cd $GITHUB_WORKSPACE                
      - name: Install ANTLR
        run: |
          chmod +x Sharplasu.Tests/generate_test_parsers.sh
          curl -O https://www.antlr.org/download/antlr-4.13.0-complete.jar
      - name: Generate test parsers
        run: |
            ls
            ./generate_test_parsers.sh            
        working-directory: "Sharplasu.Tests"
      #- name: Install dependencies
      #  run: dotnet restore
      #- name: Build
      #  run: dotnet build --configuration Release --no-restore
      #- name: Test
      #  run: dotnet test --no-restore --verbosity normal